## üìñ **Gu√≠a de uso: Transcripci√≥n de audio con whisply en Mac M1**

```markdown
# Gu√≠a de uso detallada

## üéØ √çndice
1. [Primeros pasos](#primeros-pasos)
2. [Interfaz gr√°fica (GUI)](#interfaz-gr√°fica-gui)
3. [L√≠nea de comandos (CLI)](#l√≠nea-de-comandos-cli)
4. [Diarizaci√≥n de hablantes](#diarizaci√≥n-de-hablantes)
5. [Formatos de salida](#formatos-de-salida)
6. [Consejos y trucos](#consejos-y-trucos)
7. [Soluci√≥n de problemas](#soluci√≥n-de-problemas)

---

## üöÄ Primeros pasos

### Activar el entorno
Siempre que quieras usar el proyecto, primero activa el entorno virtual:

```bash
cd ~/transcripcion-whisply-m1
source venv/bin/activate
```

### Iniciar la interfaz gr√°fica
```bash
whisply app
```
Luego abre tu navegador en: **http://127.0.0.1:7860**

---

## üñ•Ô∏è Interfaz gr√°fica (GUI)

### Pantalla principal

Al abrir la interfaz ver√°s:

1. **Selector de archivos** - Arrastra o selecciona tu audio
2. **Modelo** - Desplegable para elegir el modelo
3. **Idioma** - Selecciona el idioma del audio
4. **hf_token** - Campo para tu token de Hugging Face
5. **Opciones**:
   - ‚òê Diarize (identificar hablantes)
   - ‚òê Subt√≠tulos (generar .srt)
6. **Bot√≥n** - "Transcribir" para empezar

### Flujo de trabajo b√°sico

1. **Selecciona un archivo** (MP3, M4A, WAV, MP4...)
2. **Elige modelo**: `large-v3-turbo` (mejor equilibrio)
3. **Idioma**: `es` para espa√±ol
4. **Token**: P√©galo SOLO si quieres diarizaci√≥n
5. **Desmarca "diarize"** si solo quieres texto
6. **Haz clic en "Transcribir"**

### Durante la transcripci√≥n

Ver√°s:
- Barra de progreso
- Tiempo transcurrido
- Mensajes de estado
- Al final, el texto aparecer√° en pantalla

### D√≥nde se guarda
Por defecto, en la **misma carpeta del audio** con el mismo nombre + `.txt`

---

## ‚å®Ô∏è L√≠nea de comandos (CLI)

### Comandos b√°sicos

```bash
# Ver todos los comandos disponibles
whisply --help

# Ver opciones de transcripci√≥n
whisply run --help
```

### Transcripci√≥n simple

```bash
# M√≠nimo necesario
whisply run audio.mp3

# Con modelo grande y espa√±ol (recomendado)
whisply run audio.mp3 --model large --language es --no-diarize
```

### Opciones m√°s usadas

| Opci√≥n | Descripci√≥n | Ejemplo |
|--------|-------------|---------|
| `--model` | Modelo a usar | `--model large-v3-turbo` |
| `--language` | C√≥digo de idioma | `--language es` |
| `--no-diarize` | Sin identificar hablantes | `--no-diarize` |
| `--diarize` | Con identificaci√≥n de hablantes | `--diarize` |
| `--format` | Formato de salida | `--format srt` |
| `--output` | Carpeta de destino | `--output ~/Transcripciones` |
| `--verbose` | Mostrar detalles | `--verbose` |

### Ejemplos pr√°cticos

```bash
# 1. Transcripci√≥n r√°pida con modelo peque√±o
whisply run audio.mp3 --model tiny --language es --no-diarize

# 2. Calidad m√°xima sin diarizaci√≥n
whisply run audio.mp3 --model large-v3 --language es --no-diarize

# 3. Con diarizaci√≥n (necesitas token)
export HUGGINGFACE_TOKEN="hf_token..."
whisply run audio.mp3 --model large-v3-turbo --language es --diarize

# 4. Guardar en carpeta espec√≠fica
whisply run audio.mp3 --model large --language es --output ./mis_transcripciones

# 5. Generar subt√≠tulos
whisply run audio.mp3 --model large --language es --format srt --output ./subtitulos

# 6. Procesar todos los audios de una carpeta
whisply run "carpeta/*.mp3" --model large --language es --no-diarize
```

---

## üë• Diarizaci√≥n de hablantes

### Qu√© es
Identifica **QUI√âN** dice cada frase, no solo lo que se dice.

### Requisitos
1. ‚úÖ Token de Hugging Face
2. ‚úÖ Aceptar condiciones de [pyannote/speaker-diarization-3.1](https://hf.co/pyannote/speaker-diarization-3.1)
3. ‚úÖ Aceptar condiciones de [pyannote/segmentation-3.0](https://hf.co/pyannote/segmentation-3.0)

### C√≥mo usarla

**Opci√≥n 1: Interfaz gr√°fica**
1. Pega tu token en el campo `hf_token`
2. Marca la casilla **"diarize"**
3. Transcribe normalmente

**Opci√≥n 2: L√≠nea de comandos**
```bash
export HUGGINGFACE_TOKEN="hf_token..."
whisply run audio.mp3 --model large --language es --diarize
```

### Resultado esperado
```
[Hablante 1]: Buenos d√≠as, bienvenidos a la reuni√≥n.
[Hablante 2]: Gracias por invitarme.
[Hablante 1]: Hoy vamos a hablar del proyecto.
[Hablante 3]: Yo tengo algunas ideas que compartir.
```

---

## üìÑ Formatos de salida

### TXT (texto plano)
```bash
whisply run audio.mp3 --format txt
```
Salida: `audio.txt` con texto plano.

### SRT (subt√≠tulos)
```bash
whisply run audio.mp3 --format srt
```
Salida: `audio.srt` compatible con reproductores de video.

### VTT (web)
```bash
whisply run audio.mp3 --format vtt
```
Salida: `audio.vtt` para p√°ginas web.

### JSON (datos estructurados)
```bash
whisply run audio.mp3 --format json
```
Salida: `audio.json` con metadatos, tiempos, hablantes...

### Todos a la vez
```bash
whisply run audio.mp3 --format txt --format srt --format json
```

---

## üí° Consejos y trucos

### üéØ Para m√°xima calidad
```bash
whisply run audio.mp3 --model large-v3 --language es --no-diarize
```
- Modelo: `large-v3` (el m√°s grande)
- Tiempo: ~10 min por hora de audio

### ‚ö° Para m√°xima velocidad
```bash
whisply run audio.mp3 --model tiny --language es --no-diarize
```
- Modelo: `tiny` (el m√°s peque√±o)
- Tiempo: ~30 seg por hora de audio
- Precisi√≥n: ~70-80%

### ‚öñÔ∏è Mejor equilibrio (recomendado)
```bash
whisply run audio.mp3 --model large-v3-turbo --language es --no-diarize
```
- Modelo: `large-v3-turbo`
- Tiempo: ~5 min por hora de audio
- Precisi√≥n: ~95%

### üó£Ô∏è Para audios en espa√±ol
Siempre a√±ade `--language es`. Mejora la precisi√≥n notablemente.

### üìÅ Organizar por carpetas
```bash
# Crear estructura
mkdir -p ~/Transcripciones/{entrevistas,reuniones,notas}

# Transcribir directamente a cada carpeta
whisply run entrevista.mp3 --output ~/Transcripciones/entrevistas
```

### üîÑ Procesar por lotes
```bash
# Todos los MP3 de una carpeta
for file in *.mp3; do
    echo "Procesando: $file"
    whisply run "$file" --model large --language es --no-diarize
done
```

### üìä Ver progreso en detalle
```bash
whisply run audio.mp3 --verbose
```
Muestra tiempos, confianza, tokens procesados...

---

## üêõ Soluci√≥n de problemas

### El proceso se queda atascado
```bash
# Probar con modelo m√°s peque√±o
whisply run audio.mp3 --model medium --language es --no-diarize

# Ver logs detallados
whisply run audio.mp3 --verbose
```

### Error de memoria
Para audios muy largos (>2 horas):
```bash
# Usar modelo medium (consume menos RAM)
whisply run audio_largo.mp3 --model medium --language es --no-diarize
```

### La diarizaci√≥n no funciona
```bash
# Verificar token
echo $HUGGINGFACE_TOKEN

# Verificar condiciones aceptadas
# Vuelve a los enlaces de pyannote y aseg√∫rate de haber hecho clic en "Agree"
```

### No encuentra el archivo
```bash
# Usar ruta absoluta
whisply run ~/Descargas/mi_audio.mp3

# O navegar primero a la carpeta
cd ~/Descargas
whisply run mi_audio.mp3
```

---

## üìä Comparativa de modelos

| Modelo | Tama√±o | Velocidad | Precisi√≥n | Uso recomendado |
|--------|--------|-----------|-----------|-----------------|
| `tiny` | ~75MB | ‚ö°‚ö°‚ö°‚ö°‚ö° | ~70% | Pruebas r√°pidas |
| `base` | ~150MB | ‚ö°‚ö°‚ö°‚ö° | ~80% | Audios cortos |
| `small` | ~500MB | ‚ö°‚ö°‚ö° | ~85% | Calidad b√°sica |
| `medium` | ~1.5GB | ‚ö°‚ö° | ~90% | Equilibrio |
| `large` | ~3GB | ‚ö° | ~95% | M√°xima calidad |
| `large-v3-turbo` | ~1.5GB | ‚ö°‚ö° | ~95% | **MEJOR OPCI√ìN** |

---

## üéì Ejercicios pr√°cticos

### Ejercicio 1: Primera transcripci√≥n
```bash
# Descarga un audio de prueba
curl -o prueba.wav https://www2.cs.uic.edu/~i101/SoundFiles/taunt.wav

# Transcr√≠belo
whisply run prueba.wav --model tiny --language en --no-diarize

# Mira el resultado
cat prueba.txt
```

### Ejercicio 2: Comparar modelos
```bash
# Prueba el mismo audio con diferentes modelos
whisply run prueba.wav --model tiny --language en --no-diarize
whisply run prueba.wav --model base --language en --no-diarize
whisply run prueba.wav --model small --language en --no-diarize
# Compara la calidad vs tiempo
```

### Ejercicio 3: Diarizaci√≥n
```bash
# Con un audio de 2 personas (necesitas token)
export HUGGINGFACE_TOKEN="hf_token..."
whisply run entrevista.wav --model large --language es --diarize
```

---

## üìö Referencia r√°pida

### C√≥digos de idioma comunes
- `es` - Espa√±ol
- `en` - Ingl√©s
- `fr` - Franc√©s
- `de` - Alem√°n
- `it` - Italiano
- `pt` - Portugu√©s
- `ca` - Catal√°n

### Atajos √∫tiles
```bash
# A√±ade estos alias a ~/.zshrc
alias transcribe='whisply run --model large-v3-turbo --language es --no-diarize'
alias transcribe-diarize='whisply run --model large-v3-turbo --language es --diarize'

# Uso:
transcribe audio.mp3
transcribe-diarize reunion.mp3
```

¬øQuieres que a√±ada alguna secci√≥n m√°s espec√≠fica o tienes alguna duda sobre alg√∫n comando en particular?
